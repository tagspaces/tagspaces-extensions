(this["webpackJsonp@tagspaces/md-editor"]=this["webpackJsonp@tagspaces/md-editor"]||[]).push([[0],{193:function(e,t,n){"use strict";n.r(t);var i=n(6),o=n.n(i),r=n(40),a=n.n(r),c=n(5),s=n(8),d=n(2),u=n(47),f=n(64),l=(n(190),n(191),n(63));function m(e,t,n){var o=Object(i.useRef)();Object(i.useEffect)((function(){var i=(null===n||void 0===n?void 0:n.current)||window;if(i&&i.addEventListener){o.current!==t&&(o.current=t);var r=function(e){(null===o||void 0===o?void 0:o.current)&&o.current(e)};return i.addEventListener(e,r),function(){i.removeEventListener(e,r)}}}),[e,n,t])}var w,p=n(33),v=function(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1];function r(e){return 0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("file://")||0===e.indexOf("data:")}Object(i.useEffect)((function(){var e=function(e){var t=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search),i=null===n?"":decodeURIComponent(n[1].replace(/\+/g," "));i.includes("#")&&(i=i.split("#").join("%23"));return i}("file"),t=document.URL.startsWith("http")&&!document.URL.startsWith("http://localhost:1212/")||e.startsWith("http");if(n){var i=document.getElementsByClassName("milkdown");if(i.length>0){if(!a()){var o=i[0].getElementsByTagName("a");Object(c.a)(o).forEach((function(e){var n,i=e.getAttribute("href");i&&0===i.indexOf("#")||(r(i)||(n=(t?"":"file://")+window.fileDirectory+"/"+encodeURIComponent(i),e.setAttribute("href",n)),e.addEventListener("click",(function(e){e.preventDefault(),window.parent.postMessage(JSON.stringify({command:"openLinkExternally",link:n||i}),"*")})))}))}var s=i[0].getElementsByTagName("img");Object(c.a)(s).forEach((function(e){var n=e.getAttribute("src");if(!r(n)){var i=(t?"":"file://")+window.fileDirectory+"/"+n;e.setAttribute("src",i)}}))}}}),[n]),m("keyup",(function(e){a()&&(e.ctrlKey||e.metaKey)&&"s"===e.key.toLowerCase()?window.parent.postMessage(JSON.stringify({command:"saveDocument"}),"*"):(e.ctrlKey||e.metaKey)&&"p"===e.key.toLowerCase()&&window.print()})),m("dblclick",(function(e){a()||window.parent.postMessage(JSON.stringify({command:"editDocument"}),"*")})),m("contentLoaded",(function(){o(!0)}));var a=function(){return window.editMode};return function(){if(!n)return null;var e;if(a()){var t={markdown:[function(e){a()&&window.parent.postMessage(JSON.stringify({command:"contentChangedInEditor"}),"*"),window.mdContent=e()}]};e=Object(u.b)((function(e){return(new d.a).config((function(n){n.set(d.m,e),window.mdContent&&n.set(d.f,window.mdContent),n.set(l.b,t),n.set(d.h,{editable:a()})})).use(f.a).use(l.a)}))}else e=Object(u.b)((function(e){return(new d.a).config((function(t){t.set(d.m,e),t.set(d.f,window.mdContent),t.set(d.h,{editable:a()})})).use(f.a)}));return Object(p.jsx)(u.a,{editor:e})}()};w={command:"loadDefaultTextContent"},window.parent.postMessage(JSON.stringify(w),"*"),a.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.314a4006.chunk.js.map